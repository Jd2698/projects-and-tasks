<form [formGroup]="formGroup" (ngSubmit)="onSubmit()" class="form-container">
  <h2>{{ taskId ? 'Actualizar tarea' : 'Crear tarea'}}</h2>
  <mat-form-field appearance="fill">
    <mat-label>TÃ­tulo</mat-label>
    <input matInput formControlName="titulo" autofocus />

    @if (get('titulo')?.hasError('required') && get('titulo')?.touched) {
    <mat-error>Titulo es requerido</mat-error>
    }
  </mat-form-field>

  <mat-checkbox
    [checked]="get('estado')?.value === 'completada'"
    (change)="onCheckboxChange('completada')"
    value="completada"
  >
    Completada
  </mat-checkbox>

  <mat-checkbox
    [checked]="get('estado')?.value === 'no completada'"
    (change)="onCheckboxChange('no completada')"
  >
    No completada
  </mat-checkbox>

  <div class="buttons-container">
    <button matButton="tonal" [routerLink]="['/projects',  projectId, 'tasks']">
      volver
    </button>

    <button
      matButton="filled"
      type="submit"
      [disabled]="!formGroup.valid ? true: false"
    >
      {{ taskId ? 'Actualizar' : 'Crear'}}
    </button>
  </div>
</form>
